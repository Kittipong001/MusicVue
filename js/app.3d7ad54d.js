(function(){var e={5766:function(e,t,r){"use strict";var s=r(9242),a=r(2483),o=r(3396),n=r(7139);const l=e=>((0,o.dD)("data-v-6cf15f4c"),e=e(),(0,o.Cn)(),e),i={class:"flex items-center justify-center ml-4 sm:ml-0"},d={key:0,id:"song-list",class:"w-full md:w-3/4 text-sm border-separate border-spacing-y-2"},u=l((()=>(0,o._)("thead",{class:"w-full"},[(0,o._)("tr",{class:"w-full"},[(0,o._)("th",{class:"td-class"},"เพลง"),(0,o._)("th",{class:"td-class"},"ประเภท"),(0,o._)("th",{class:"td-class"},"ความคิดเห็น")])],-1))),c={class:"tr-class"},g=["onClick"],m=l((()=>(0,o._)("i",{class:"fa-regular fa-comment mr-2"},null,-1))),p={key:1,class:"text-red-600"};function h(e,t,r,s,a,l){const h=(0,o.up)("HeroSection"),f=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(h),(0,o._)("div",i,[e.userLoggedIn?((0,o.wg)(),(0,o.iD)("table",d,[u,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.songs,(e=>((0,o.wg)(),(0,o.iD)("tbody",{class:"w-100",key:e.id},[(0,o._)("tr",c,[(0,o._)("td",{class:(0,n.C_)(["td-class text-center text-lg",{currentSong:this.currentSongId===e.id}])},[(0,o.Wm)(f,{class:"block",to:{name:"SingleSong",query:{id:e.id,genre:e.genre,comment_count:Number(e.comment_count),modified_name:e.modified_name,original_name:e.original_name,song_url:e.song_url,uid:e.uid}}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.modified_name),1)])),_:2},1032,["to"])],2),(0,o._)("td",{class:(0,n.C_)(["td-class text-center text-lg",{currentSong:this.currentSongId===e.id}])},(0,n.zw)(e.genre),3),(0,o._)("td",{class:(0,n.C_)(["td-class text-center text-lg",{currentSong:this.currentSongId===e.id}])},[(0,o.Wm)(f,{custom:"",to:{name:"SingleSong",query:{id:e.id,genre:e.genre,comment_count:Number(e.comment_count),modified_name:e.modified_name,original_name:e.original_name,song_url:e.song_url,uid:e.uid},hash:"#comments"}},{default:(0,o.w5)((({navigate:t})=>[(0,o._)("span",{onClick:t,style:{cursor:"pointer"}},[m,(0,o.Uk)((0,n.zw)(e.comment_count),1)],8,g)])),_:2},1032,["to"])],2)])])))),128))])):((0,o.wg)(),(0,o.iD)("p",p,"Please, sign in to access your music."))])])}r(7658);var f=r(2751),b=r(3866),w=r(1294),x=r(4287);const y={apiKey:"AIzaSyDpZ71aLvxTtoPXJXE3K1kGK877yHfwpA4",authDomain:"flowmusic-20cf4.firebaseapp.com",projectId:"flowmusic-20cf4",storageBucket:"flowmusic-20cf4.appspot.com",appId:"1:940438045424:web:68e07e5e3902c6ffe57835"},_=f.Z.initializeApp(y),v=(0,w.cF)(_),k=(0,x.ad)(_),$=(0,b.v0)();var D=r(2578);const S=(0,D.Q_)("music",{state:()=>({songsLoading:!1,songId:""}),actions:{loadSongs(e){this.songsLoading="yes"===e},setSongId(e){this.songId=e}}}),M=(0,D.Q_)("auth",{state:()=>({userLoggedIn:!1,userEmail:"",displayName:""}),actions:{loginUser(e){this.userLoggedIn=!0,this.userEmail=e},logOutUser(){this.userLoggedIn=!1,this.userEmail=""},async authenticate(e,t){await(0,b.e5)($,e,t).then((()=>{this.userLoggedIn=!0,this.userEmail=e,this.displayName=e.match(/^([^@]*)@/)[1]})).catch((()=>{}))}}}),I={class:"max-w-screen-xl text-center mx-auto my-4"},C=(0,o._)("h1",{class:"mb-4 text-4xl font-extrabold leading-none tracking-tight md:text-5xl lg:text-6xl dark:text-white"}," Welcome to NPRU Music. ",-1),U=(0,o._)("p",{class:"mb-6 text-lg font-normal text-secondary lg:text-xl sm:px-16 xl:px-48 dark:text-gray-400"}," ที่ NPRU Music เรามุ่งเน้นที่จะมอบประสบการณ์ทางดนตรีที่ดีที่สุดให้กับคุณทุกเวลา ได้ทุกที่ ",-1),O=[C,U];function z(e,t,r,s,a,n){return(0,o.wg)(),(0,o.iD)("div",I,O)}var q={},L=r(89);const A=(0,L.Z)(q,[["render",z]]);var j=A,T=r(2005),N={formatTime(e){const t=Math.floor(e/60)||0,r=Math.round(e-60*t||0);return`${t}:${r<10?"0":""}${r}`}};const E=(0,D.Q_)("player",{state:()=>({currentSong:{},sound:{},seek:"00:00",duration:"00:00",playerProgress:"0%"}),getters:{playing:e=>!!e.sound.playing&&e.sound.playing()},actions:{async newSong(e){this.sound instanceof T.Howl&&this.sound.unload(),this.sound.playing&&this.stopAudio(),this.currentSong=e,this.sound=new T.Howl({src:[e.song_url],html5:!0}),this.sound.play(),this.sound.on("play",(()=>{requestAnimationFrame(this.progress)}))},progress(){this.seek=N.formatTime(this.sound.seek()),this.duration=N.formatTime(this.sound.duration()),this.playerProgress=this.sound.seek()/this.sound.duration()*100+"%",this.sound.playing()&&requestAnimationFrame(this.progress)},async toggleAudio(){this.sound.playing&&(this.sound.playing()?(this.sound.pause(),this.currentSong={}):this.sound.play())},async stopAudio(){this.sound.playing()&&this.sound.pause()},updateSeek(e){if(!this.sound.playing)return;const{x:t,width:r}=e.currentTarget.getBoundingClientRect(),s=e.clientX-t,a=s/r,o=this.sound.duration()*a;this.sound.seek(o),this.sound.once("seek",this.progress)}}}),P=(0,x.ad)(_),B=(0,x.hJ)(P,"songs"),R=(0,b.v0)();var H={data(){return{songs:[],resultsPerPage:20,pendingRequest:!1,lastDoc:{}}},components:{HeroSection:j},methods:{...(0,D.nv)(S,["loadSongs","setSongId"]),async getDocuments(e){let t=(0,x.IO)(B,(0,x.ar)("uid","==",R.currentUser.uid),(0,x.Xo)("original_name"),(0,x.b9)(this.resultsPerPage));await(0,x.PL)(e||t).then((e=>{e.forEach((e=>{let t=e.data();t.id=e.id,this.songs.push(t)})),this.lastDoc=e.docs[e.docs.length-1]})).then((()=>{this.loading=!1})).catch((()=>{this.loading=!1})),this.loadSongs("no"),this.pendingRequest=!1},async getSongs(){if(!this.pendingRequest&&(this.pendingRequest=!0,this.lastDoc)){const e=(0,x.IO)(B,(0,x.ar)("uid","==",R.currentUser.uid),(0,x.Xo)("original_name"),(0,x.TQ)(this.lastDoc),(0,x.b9)(this.resultsPerPage));this.getDocuments(e),this.pendingRequest=!1}},handleScroll(){const{scrollTop:e,offsetHeight:t}=document.documentElement,{innerHeight:r}=window,s=Math.round(e)+r===t;s&&this.getSongs()}},computed:{...(0,D.rn)(M,["userLoggedIn"]),...(0,D.rn)(E,["currentSong"]),currentSongId(){return this.currentSong.id}},watch:{userLoggedIn(e){!0===e&&this.getDocuments()}},created(){this.userLoggedIn&&(this.getDocuments(),window.addEventListener("scroll",this.handleScroll))},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)}};const F=(0,L.Z)(H,[["render",h],["__scopeId","data-v-6cf15f4c"]]);var Z=F;const K={id:"manageSongs",class:"max-w-screen-2lg mx-auto"},V={class:"h-screen flex flex-col md:flex-row items-center md:items-start justify-start md:justify-center"};function W(e,t,r,s,a,n){const l=(0,o.up)("AlertMessage"),i=(0,o.up)("UploadFile"),d=(0,o.up)("MySongs");return(0,o.wg)(),(0,o.iD)("div",K,[e.showAlert?((0,o.wg)(),(0,o.j4)(l,{key:0})):(0,o.kq)("",!0),(0,o._)("div",V,[(0,o.Wm)(i),(0,o.Wm)(d)])])}const Y=(0,D.Q_)("alert",{state:()=>({showAlert:!1,alertText:"",alertColor:""}),actions:{setAlert(e,t){this.showAlert=!this.showAlert,this.alertText=e,this.alertColor=t,setTimeout((()=>{this.showAlert=!this.showAlert}),2e3)}}}),G=(0,o._)("svg",{class:"flex-shrink-0 w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o._)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1),J={class:"ml-3 text-sm font-medium"};function X(e,t,r,s,a,l){return(0,o.wg)(),(0,o.iD)("div",{id:"alert-border-3",class:(0,n.C_)(["mx-auto max-w-prose flex items-center justify-center p-4 mb-4 border-t-4",e.alertColor]),role:"alert"},[G,(0,o._)("div",J,(0,n.zw)(e.alertText),1)],2)}var Q={data(){return{}},computed:{...(0,D.rn)(Y,["alertText","alertColor"])}};const ee=(0,L.Z)(Q,[["render",X]]);var te=ee;const re=(0,o._)("div",{class:"flex items-center justify-between w-full px-1"},[(0,o._)("h5",{class:"mb-2 text-xl font-bold tracking-tight text-white"},"อัปโหลด"),(0,o._)("i",{class:"fa-solid fa-upload text-white"})],-1),se={class:"flex items-center justify-center w-full"},ae=(0,o.uE)('<div class="flex flex-col items-center justify-center pt-5 pb-6"><svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg><p class="mb-2 px-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">คลิกเพื่ออัพโหลด</span> หรือลากและวางไฟล์เสียง </p></div>',1),oe={class:"w-full bg-gray-200 rounded-full h-2.5 mb-4 dark:bg-gray-700"};function ne(e,t,r,a,l,i){return(0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["basis-1/4 mb-4 md:mb-0 mx-1 p-6 bg-blue-500 order border-gray-200 rounded-lg shadow",{"bg-hover border-blue-400 border-solid":l.isDraggedOver}]),onDrag:t[1]||(t[1]=(0,s.iM)((()=>{}),["prevent","stop"])),onDragstart:t[2]||(t[2]=(0,s.iM)((()=>{}),["prevent","stop"])),onDragend:t[3]||(t[3]=(0,s.iM)((e=>l.isDraggedOver=!1),["prevent","stop"])),onDragover:t[4]||(t[4]=(0,s.iM)((e=>l.isDraggedOver=!0),["prevent","stop"])),onDragenter:t[5]||(t[5]=(0,s.iM)((e=>l.isDraggedOver=!0),["prevent","stop"])),onDragleave:t[6]||(t[6]=(0,s.iM)((e=>l.isDraggedOver=!1),["prevent","stop"])),onDrop:t[7]||(t[7]=(0,s.iM)((e=>i.uploadFiles(e)),["prevent","stop"]))},[re,(0,o._)("div",se,[(0,o._)("label",{for:"dropzone-file",class:(0,n.C_)(["flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-white",{"bg-blue-300 border-blue-400 border-solid":l.isDraggedOver}])},[ae,(0,o._)("input",{id:"dropzone-file",type:"file",class:"hidden",multiple:"",onChange:t[0]||(t[0]=e=>i.uploadFiles(e))},null,32)],2)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.uploads,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"mb-4",key:e.name},[(0,o._)("div",{class:(0,n.C_)(["my-1 text-base font-medium text-white",e.text_class])},[(0,o._)("i",{class:(0,n.C_)([e.icon,"mr-2"])},null,2),(0,o.Uk)((0,n.zw)(e.name),1)],2),(0,o._)("div",oe,[(0,o._)("div",{class:(0,n.C_)(["h-2.5 rounded-full",e.variant]),style:(0,n.j5)({width:e.current_progress+"%"})},null,6)])])))),128))],34)}var le={data(){return{isDraggedOver:!1,uploads:[]}},methods:{...(0,D.nv)(S,["loadSongs"]),...(0,D.nv)(Y,["setAlert"]),async uploadFiles(e){this.isDraggedOver=!1;const t=e.dataTransfer?[...e.dataTransfer.files]:[...e.target.files];t.forEach((e=>{let t={};const r=(0,w.iH)(v),s=(0,w.iH)(r,`songs/${e.name}`);let a={};(0,w.KV)(s,e).then((e=>{a=e,t={uid:$.currentUser.uid,display_name:$.currentUser.displayName,original_name:a.metadata.name,modified_name:a.metadata.name,genre:"Unspecified",comment_count:0,song_url:"",datePosted:(new Date).toString()}}));const o=this.uploads.push({fileData:a,current_progress:0,name:e.name,variant:"bg-blue-600",icon:"fa-solid fa-spinner fa-spin",text_class:""})-1,n=(0,w.B0)(s,e);n.on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100;this.uploads.length>0&&(this.uploads[o].current_progress=t,100==this.uploads[o].current_progress&&(this.uploads[o].icon=""))}),(e=>{this.uploads[o].variant="bg-red-500",this.uploads[o].icon="fa-solid fa-xmark",this.uploads[o].text_class="text-red-500",console.log("error",e)}),(async()=>{await(0,w.Jt)(n.snapshot.ref).then((e=>{t.song_url=e})),this.uploads.length>0&&(this.uploads[o].variant="bg-green-500",this.uploads[o].icon="fa-solid fa-check",this.uploads[o].text_class="text-green-500");const e=(0,x.ad)(_);await(0,x.ET)((0,x.hJ)(e,"songs"),t).then((()=>{this.loadSongs("yes"),this.setAlert("Song added","text-green-800 border-green-300 bg-green-50"),this.uploads=[]})).catch((e=>{console.log("error",e)}))}))}))}},computed:{},created(){}};const ie=(0,L.Z)(le,[["render",ne]]);var de=ie;const ue={class:"basis-1/2 mx-1 p-6 bg-blue-500 border border-gray-200 rounded-lg shadow"},ce=(0,o._)("div",{class:"flex items-center justify-between w-full px-1"},[(0,o._)("h5",{class:"mb-2 text-xl font-bold tracking-tight text-white dark:text-white"},"เพลงของฉัน"),(0,o._)("i",{class:"fa-solid fa-music text-white"})],-1),ge={key:0,class:"flex items-center justify-center w-100 h-56 border border-gray-200 rounded-lg bg-gray-50 my-2"},me=(0,o._)("div",{class:"px-3 py-1 text-sm font-medium leading-none text-center bg-blue-200 rounded-full animate-pulse"}," กำลังโหลด... ",-1),pe=[me],he={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},fe={class:"w-full text-sm text-left"},be=(0,o._)("thead",{class:"text-xs uppercase bg-secondary text-white"},[(0,o._)("tr",{class:"tr-class"},[(0,o._)("th",{scope:"col",class:"px-6 py-3"},"เพลง"),(0,o._)("th",{scope:"col",class:"px-6 py-3"},"ประเภท"),(0,o._)("th",{scope:"col",class:"px-6 py-3"},"การดำเนินการ")])],-1),we={scope:"row",class:"px-6 py-4 font-medium text-primary"},xe={class:"px-6 py-4"},ye={class:"flex items-center md:items-start justify-start px-6 py-4"},_e=["onClick"],ve=["onClick"],ke=(0,o._)("i",{class:"fa-solid fa-trash mx-1"},null,-1),$e=[ke];function De(e,t,r,a,l,i){const d=(0,o.up)("EditModal");return(0,o.wg)(),(0,o.iD)("div",ue,[ce,l.loading?((0,o.wg)(),(0,o.iD)("div",ge,pe)):(0,o.kq)("",!0),(0,o._)("div",he,[(0,o._)("table",fe,[be,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.sortedSongs,(e=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("tr",{class:"tr-class text-primary border-b bg-blue-200",key:e.uid},[(0,o._)("th",we,(0,n.zw)(e.modified_name||e.original_name),1),(0,o._)("td",xe,(0,n.zw)(e.genre||"Unspecified"),1),(0,o._)("td",ye,[(0,o._)("a",{onClick:t=>i.edit(e.id)},[(0,o.Wm)(d)],8,_e),(0,o._)("a",{onClick:t=>i.deleteSong(e.id),class:"mx-1"},$e,8,ve)])])),[[s.F8,e]]))),128))])])])])}const Se=(0,o._)("a",{"data-modal-target":"popup-modal","data-modal-toggle":"popup-modal",class:"mx-1"},[(0,o._)("i",{class:"fa-solid fa-pen-to-square"})],-1),Me={id:"popup-modal",tabindex:"-1",class:"fixed top-0 left-0 right-0 z-50 hidden p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full"},Ie={class:"relative w-full max-w-md max-h-full"},Ce={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},Ue=(0,o._)("button",{type:"button",class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"popup-modal"},[(0,o._)("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[(0,o._)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})]),(0,o._)("span",{class:"sr-only"},"Close modal")],-1);function Oe(e,t,r,s,a,n){const l=(0,o.up)("EditForm");return(0,o.wg)(),(0,o.iD)(o.HY,null,[Se,(0,o._)("div",Me,[(0,o._)("div",Ie,[(0,o._)("div",Ce,[Ue,(0,o.Wm)(l,{onCloseModal:n.closeModal},null,8,["onCloseModal"])])])])],64)}var ze=r(7147);const qe={class:"mt-2"},Le={class:"mb-6"},Ae=(0,o._)("label",{for:"songTitle",class:"text-left block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"ชื่อเพลง",-1),je={class:"mb-6"},Te=(0,o._)("label",{for:"genre",class:"text-left block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"ประเภท",-1),Ne={class:"flex flex-col md:flex-row mt-2"},Ee=["disabled"];function Pe(e,t,r,a,l,i){return(0,o.wg)(),(0,o.iD)("div",{class:"p-6 text-center",onClick:t[5]||(t[5]=(0,s.iM)((()=>{}),["stop"]))},[(0,o._)("form",qe,[(0,o._)("div",Le,[Ae,(0,o.wy)((0,o._)("input",{type:"songTitle","onUpdate:modelValue":t[0]||(t[0]=e=>l.songTitle=e),onBlur:t[1]||(t[1]=(...e)=>a.v$.songTitle.$touch&&a.v$.songTitle.$touch(...e)),class:"songTitle bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Iron Maiden - Seventh son of the seventh son",required:""},null,544),[[s.nr,l.songTitle]]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.v$.songTitle.$errors,(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mt-2 text-sm text-left text-red-600 dark:text-red-500",key:e.$uid},[(0,o._)("strong",null,(0,n.zw)(e.$message),1)])))),128))]),(0,o._)("div",je,[Te,(0,o.wy)((0,o._)("input",{type:"genre","onUpdate:modelValue":t[2]||(t[2]=e=>l.songGenre=e),onBlur:t[3]||(t[3]=(...e)=>a.v$.songGenre.$touch&&a.v$.songGenre.$touch(...e)),class:"songGenre bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Heavy metal",required:""},null,544),[[s.nr,l.songGenre]])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.v$.songGenre.$errors,(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mt-2 text-sm text-left text-red-600 dark:text-red-500",key:e.$uid},[(0,o._)("strong",null,(0,n.zw)(e.$message),1)])))),128)),(0,o._)("div",Ne,[(0,o._)("button",{disabled:a.v$.$invalid,type:"submit",onClick:t[4]||(t[4]=(0,s.iM)(((...e)=>i.update&&i.update(...e)),["prevent"])),class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 disabled:opacity-60"}," อัปเดต ",8,Ee)])])])}var Be=r(4219),Re=r(5420),He={data(){return{songTitle:"",songGenre:""}},setup(){return{v$:(0,Be.Xw)()}},methods:{...(0,D.rn)(S,["songId"]),...(0,D.nv)(S,["loadSongs","setSongId"]),...(0,D.nv)(Y,["setAlert"]),async update(){this.$emit("close-modal");const e=(0,x.JU)(k,"songs",this.songID);await(0,x.r7)(e,{modified_name:this.songTitle,genre:this.songGenre}).then((()=>{this.setAlert("Song updated","text-green-800 border-green-300 bg-green-50"),this.songTitle="",this.songGenre="",this.setSongId(""),this.loadSongs("yes")}))},async getSong(){const e=(0,x.JU)(k,"songs",this.songId()),t=await(0,x.QT)(e);t.exists()&&(this.songTitle=t.data().modified_name||t.data().original_name,this.songGenre=t.data().genre)}},validations(){return{songTitle:{required:Re.BM.withMessage("Song Title cannot be empty",Re.C1)},songGenre:{required:Re.BM.withMessage("Song Genre cannot be empty",Re.C1)}}},computed:{songID(){return this.songId()}},watch:{songID(){this.getSong()}},created(){}};const Fe=(0,L.Z)(He,[["render",Pe]]);var Ze=Fe,Ke={components:{EditForm:Ze},methods:{closeModal(){const e=document.getElementById("popup-modal"),t=new ze.u_(e);t.hide()}},created(){(0,ze.wQ)()}};const Ve=(0,L.Z)(Ke,[["render",Oe]]);var We=Ve;const Ye=(0,x.ad)(_),Ge=(0,x.hJ)(Ye,"songs");var Je={data(){return{songs:[],loading:!1}},components:{EditModal:We},methods:{...(0,D.rn)(S,["songsLoading","songId"]),...(0,D.nv)(S,["loadSongs","setSongId"]),...(0,D.nv)(Y,["setAlert"]),async getSongs(){this.loading=!0,this.songs=[];const e=(0,b.v0)(),t=(0,x.IO)(Ge,(0,x.ar)("uid","==",e.currentUser.uid));await(0,x.PL)(t).then((e=>{e.forEach((e=>{let t=e.data();t.id=e.id,this.songs.push(t)}))})).then((()=>{this.loading=!1})).catch((()=>{this.loading=!1})),this.loadSongs("no"),this.songs.push("")},edit(e){this.setSongId(e)},async deleteSong(e){this.setSongId(e),await(0,x.oe)((0,x.JU)(Ye,"songs",this.songId())).then((()=>{this.setAlert("Song deleted","text-green-800 border-green-300 bg-green-50"),this.getSongs()}))}},watch:{dataLoaded(){this.getSongs()}},computed:{dataLoaded(){return this.songsLoading()},sortedSongs(){return this.songs.slice().sort(((e,t)=>new Date(t.datePosted)-new Date(e.datePosted)))}},created(){this.getSongs()}};const Xe=(0,L.Z)(Je,[["render",De]]);var Qe=Xe,et={name:"ManageSongs",data(){return{}},components:{UploadFile:de,MySongs:Qe,AlertMessage:te},beforeRouteEnter(e,t,r){const s=M();s.userLoggedIn?r():r("/")},methods:{},computed:{...(0,D.rn)(Y,["showAlert","alertText"])}};const tt=(0,L.Z)(et,[["render",W]]);var rt=tt;const st=(0,o._)("div",{class:"flex flex-col md:flex-row items-center md:items-start justify-start md:justify-center text-red-600"},[(0,o._)("h1",{class:""},"เราไม่พบหน้าที่คุณกำลังมองหา"),(0,o._)("span",{class:""},"เพจนี้ถูกย้ายหรือลบออกแล้ว")],-1),at={class:"mt-5 text-center"};function ot(e,t,r,s,a,n){const l=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[st,(0,o._)("div",at,[(0,o.Wm)(l,{to:"/",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"},{default:(0,o.w5)((()=>[(0,o.Uk)("กลับหน้าแรก")])),_:1})])],64)}var nt={};const lt=(0,L.Z)(nt,[["render",ot]]);var it=lt;const dt={class:"max-w-6xl mx-auto mb-20"},ut={class:"w-full mx-auto mb-4 bg-white rounded-xl overflow-hidden"},ct={class:"md:flex"},gt={key:0,class:"md:shrink-0"},mt=["src"],pt={class:"p-8 flex items-center justify-center"},ht={class:"p-2"},ft={class:"p-2"},bt={class:"uppercase tracking-wide text-md text-indigo-600 font-semibold"},wt={class:"block mt-1 text-lg leading-tight font-medium text-black"},xt={key:1,class:"my-4"},yt={class:"divide-y divide-solid w-full mb-4 border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600"},_t={class:"w-full bg-white p-4 flex align-center justify-between"},vt=(0,o._)("span",null,[(0,o._)("i",{class:"fa-regular fa-comment mr-2"})],-1),kt={class:"px-4 py-2 bg-white rounded-t-lg dark:bg-gray-800"},$t=(0,o._)("label",{for:"comment",class:"sr-only"},"ความคิดเห็นของคุณ",-1),Dt={class:"flex items-center justify-between px-3 py-2 border-t dark:border-gray-600"},St=["disabled"],Mt={class:"mb-2 w-32"},It=(0,o._)("option",{value:"1"},"ล่าสุด",-1),Ct=(0,o._)("option",{value:"2"},"เก่าสุด",-1),Ut=[It,Ct],Ot={id:"comments",class:"max-w-6xl text-gray-600 divide-y divide-gray-200 dark:text-white dark:divide-gray-700"},zt={class:"mb-1 text-black-800 text-lg md:text-lg dark:text-gray-400 font-semibold"},qt={class:"text-md text-gray-600 mb-2 italic"},Lt={class:"text-lg text-gray-600"};function At(e,t,a,l,i,d){const u=(0,o.up)("AlertMessage"),c=(0,o.up)("AudioControl");return(0,o.wg)(),(0,o.iD)("main",null,[(0,o._)("div",dt,[(0,o._)("div",ut,[(0,o._)("div",ct,[i.selectedImage?((0,o.wg)(),(0,o.iD)("div",gt,[(0,o._)("img",{class:"h-48 w-full object-cover md:h-full md:w-80",src:r(5336)("./"+i.selectedImage+".webp"),alt:"Modern building architecture"},null,8,mt)])):(0,o.kq)("",!0),(0,o._)("div",pt,[(0,o._)("div",ht,[(0,o._)("i",{onClick:t[0]||(t[0]=(0,s.iM)(((...t)=>e.toggleAudio&&e.toggleAudio(...t)),["prevent"])),class:(0,n.C_)(["fa-regular text-blue-700",{"fa-circle-play":!e.playing,"fa-circle-pause":e.playing}]),style:{"font-size":"4rem"}},null,2)]),(0,o._)("div",ft,[(0,o._)("div",bt," Song: "+(0,n.zw)(e.song.modified_name),1),(0,o._)("div",wt," Genre: "+(0,n.zw)(e.song.genre),1)])])])]),e.showAlert?((0,o.wg)(),(0,o.j4)(u,{key:0})):(0,o.kq)("",!0),e.userLoggedIn()?((0,o.wg)(),(0,o.iD)("form",xt,[(0,o._)("div",yt,[(0,o._)("div",_t,[(0,o._)("span",null,"ความคิดเห็น "+(0,n.zw)(e.song.comment_count),1),vt]),(0,o._)("div",kt,[$t,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.comment=e),id:"comment",rows:"4",class:"w-full px-0 text-sm text-gray-900 bg-white border-0 dark:bg-gray-800 focus:ring-0 dark:text-white dark:placeholder-gray-400",placeholder:"Write a comment...",required:""},null,512),[[s.nr,i.comment]])]),(0,o._)("div",Dt,[(0,o._)("button",{disabled:l.v$.$invalid,type:"submit",class:"inline-flex items-center py-2.5 px-4 text-xs font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-blue-200 dark:focus:ring-blue-900 hover:bg-blue-800 disabled:opacity-60",onClick:t[2]||(t[2]=(0,s.iM)(((...e)=>d.addComment&&d.addComment(...e)),["prevent"]))}," โพสต์ความคิดเห็น ",8,St)])])])):(0,o.kq)("",!0),(0,o._)("div",Mt,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.sort=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},Ut,512),[[s.bM,i.sort]])]),(0,o._)("dl",Ot,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(d.sortedComments,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"flex flex-col pb-3",key:e.id},[(0,o._)("dt",zt,(0,n.zw)(e.name),1),(0,o._)("dl",null,[(0,o._)("dd",qt,(0,n.zw)(d.commentDate(e.datePosted)),1),(0,o._)("dd",Lt,(0,n.zw)(e.text),1)])])))),128))])]),(0,o.Wm)(c,{onPlaySong:e.toggleAudio},null,8,["onPlaySong"])])}const jt=e=>((0,o.dD)("data-v-456502f1"),e=e(),(0,o.Cn)(),e),Tt={class:"centered w-full md:w-3/4"},Nt={class:"flex items-center justify-center mx-auto mb-1"},Et=jt((()=>(0,o._)("div",{id:"tooltip-previous",role:"tooltip",class:"absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700"},[(0,o.Uk)(" เสียงก่อนหน้า "),(0,o._)("div",{class:"tooltip-arrow","data-popper-arrow":""})],-1))),Pt=jt((()=>(0,o._)("span",{class:"sr-only"},"หยุดเสียงชั่วคราว",-1))),Bt=jt((()=>(0,o._)("div",{id:"tooltip-pause",role:"tooltip",class:"absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700"},[(0,o.Uk)(" หยุดเสียงชั่วคราว "),(0,o._)("div",{class:"tooltip-arrow","data-popper-arrow":""})],-1))),Rt={class:"flex items-center justify-between space-x-2 mx-10"},Ht={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Ft={class:"text-sm font-medium text-gray-500 dark:text-gray-400"};function Zt(e,t,r,a,l,i){return(0,o.wg)(),(0,o.iD)("div",Tt,[(0,o._)("div",Nt,[Et,(0,o._)("button",{onClick:t[0]||(t[0]=(0,s.iM)(((...e)=>i.playSong&&i.playSong(...e)),["prevent"])),"data-tooltip-target":"tooltip-pause",type:"button",class:"inline-flex items-center justify-center p-2.5 mx-2"},[(0,o._)("i",{class:(0,n.C_)(["fa-regular fa-lg",{"fa-circle-play":!e.playing,"fa-circle-pause":e.playing}])},null,2),Pt]),Bt]),(0,o._)("div",Rt,[(0,o._)("span",Ht,(0,n.zw)(e.seek),1),(0,o._)("div",{onClick:t[1]||(t[1]=(0,s.iM)(((...t)=>e.updateSeek&&e.updateSeek(...t)),["prevent"])),class:"w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-800"},[(0,o._)("div",{class:"bg-blue-600 h-1.5 rounded-full",style:(0,n.j5)({width:e.playerProgress})},null,4)]),(0,o._)("span",Ft,(0,n.zw)(e.duration),1)])])}var Kt={methods:{...(0,D.nv)(E,["updateSeek"]),playSong(){this.$emit("playSong")}},computed:{...(0,D.rn)(E,["playing","duration","seek","playerProgress"])}};const Vt=(0,L.Z)(Kt,[["render",Zt],["__scopeId","data-v-456502f1"]]);var Wt=Vt,Yt={name:"SingleSong",setup(){return{v$:(0,Be.Xw)()}},data(){return{comment:"",comments:[],sort:"1",selectedImage:null}},components:{AlertMessage:te,AudioControl:Wt},validations(){return{comment:{requiredIf:Re.BM.withMessage("Comment is required",(e=>e.length>0)),minLength:(0,Re.Ei)(3)}}},methods:{...(0,D.rn)(M,["userLoggedIn"]),...(0,D.nv)(E,["newSong","toggleAudio","stopAudio"]),...(0,D.nv)(Y,["setAlert"]),async addComment(){const e={text:this.comment,datePosted:(new Date).toString(),songId:this.song.id,name:this.currentUser,uid:$.currentUser.uid};this.comment="",await(0,x.ET)((0,x.hJ)(k,"comments"),e).then((()=>{this.song.comment_count++;const e=(0,x.JU)(k,"songs",this.song.id);(0,x.r7)(e,{comment_count:this.song.comment_count}),this.setAlert("Comment added","text-green-800 border-green-300 bg-green-50"),this.getComments()}))},async getComments(){const e=(0,x.hJ)(k,"comments");let t=(0,x.IO)(e,(0,x.ar)("songId","==",this.song.id));this.comments=[],await(0,x.PL)(t).then((e=>{e.forEach((e=>{this.comments.push(e.data())}))}))},commentDate(e){return new Date(e).toLocaleDateString("en-us",{year:"numeric",month:"short",day:"numeric",hour:"numeric"})},playSong(){this.newSong(this.song)},randomImage(){return Math.floor(6*Math.random())+1}},computed:{...(0,D.rn)(Y,["showAlert"]),...(0,D.rn)(E,["currentSong","playing"]),currentUser(){return $.currentUser.email.match(/^([^@]*)@/)[1]},sortedComments(){return this.comments.slice().sort(((e,t)=>"1"===this.sort?new Date(t.datePosted)-new Date(e.datePosted):new Date(e.datePosted)-new Date(t.datePosted)))}},created(){this.song=this.$route.query,this.selectedImage=this.randomImage(this.images),this.getComments(),this.playSong()},unmounted(){}};const Gt=(0,L.Z)(Yt,[["render",At]]);var Jt=Gt;const Xt=(0,a.p7)({history:(0,a.PO)(),scrollBehavior(e){if(e.hash)return{el:e.hash}},routes:[{path:"/",name:"Home",component:Z},{path:"/manage",name:"Manage",component:rt},{path:"/song/",name:"SingleSong",component:Jt},{path:"/:pathMatch(.*)*",name:"NotFound",component:it}],linkExactActiveClass:"text-sky-700"}),Qt={class:"mx-4 text-primary"};function er(e,t,r,a,n,l){const i=(0,o.up)("Navbar"),d=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",Qt,[(0,o.Wm)(i),(0,o.Wm)(d,null,{default:(0,o.w5)((({Component:e})=>[(0,o.Wm)(s.uT,{name:"fade",mode:"out-in"},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)((0,o.LL)(e)))])),_:2},1024)])),_:1})])}var tr=r.p+"img/Music.8bcfd671.png";const rr={class:"bg-white border-gray-200 text-primary"},sr={class:"max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4"},ar={class:"flex items-center"},or=(0,o._)("img",{src:tr,class:"h-8 mr-3",alt:"Music app Logo"},null,-1),nr=(0,o._)("button",{"data-collapse-toggle":"navbar-multi-level",type:"button",class:"inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600","aria-controls":"navbar-multi-level","aria-expanded":"false"},[(0,o._)("span",{class:"sr-only"},"เปิดเมนูหลัก"),(0,o._)("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 14"},[(0,o._)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M1 1h15M1 7h15M1 13h15"})])],-1),lr={class:"hidden w-full md:block md:w-auto",id:"navbar-multi-level"},ir={class:"flex flex-col font-medium text-primary p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 md:mt-0 md:border-0 md:bg-white"},dr={key:0},ur={key:1};function cr(e,t,r,s,a,n){const l=(0,o.up)("router-link"),i=(0,o.up)("AuthModal");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("nav",rr,[(0,o._)("div",sr,[(0,o._)("div",ar,[or,(0,o.Wm)(l,{to:"/","exact-active-class":"no-active",class:"self-center text-2xl font-semibold whitespace-nowrap"},{default:(0,o.w5)((()=>[(0,o.Uk)("NPRU Music ")])),_:1})]),nr,(0,o._)("div",lr,[(0,o._)("ul",ir,[e.userLoggedIn?((0,o.wg)(),(0,o.iD)("li",dr,[(0,o.Wm)(l,{to:"/manage",class:"block py-2 pl-3 pr-4 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0"},{default:(0,o.w5)((()=>[(0,o.Uk)("จัดการ")])),_:1})])):(0,o.kq)("",!0),(0,o._)("li",null,[(0,o.Wm)(i)]),e.userLoggedIn?((0,o.wg)(),(0,o.iD)("li",ur,[(0,o._)("a",{href:"#",class:"block py-2 pl-3 pr-4 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent",onClick:t[0]||(t[0]=(...e)=>n.signUserOut&&n.signUserOut(...e))},"ออกจากระบบ")])):(0,o.kq)("",!0)])])])])])}const gr={"data-modal-target":"defaultModal","data-modal-toggle":"defaultModal",href:"#",class:"block py-2 pl-3 pr-4 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0"},mr={id:"defaultModal",tabindex:"-1","aria-hidden":"true",class:"fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full"},pr={class:"relative w-full max-w-2xl max-h-full"},hr={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},fr={class:"flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"},br={class:"p-6"},wr={class:"flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"},xr=["disabled"],yr=["disabled"],_r=(0,o._)("button",{"data-modal-hide":"defaultModal",type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"}," ยกเลิก ",-1);function vr(e,t,r,a,l,i){const d=(0,o.up)("AuthForms");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("a",gr,(0,n.zw)(l.userName||"Login/Register"),1),(0,o._)("div",mr,[(0,o._)("div",pr,[(0,o._)("div",hr,[(0,o._)("div",fr,[(0,o._)("button",{onClick:t[0]||(t[0]=e=>i.signInOrRegister("signin")),type:"button",class:(0,n.C_)(["hover:bg-blue-800 hover:text-white focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center w-6/12",{"bg-blue-700":l.loginOrRegister,"text-white":l.loginOrRegister}])}," เข้าสู่ระบบ ",2),(0,o._)("button",{onClick:t[1]||(t[1]=e=>i.signInOrRegister("register")),type:"button",class:(0,n.C_)(["hover:bg-blue-800 hover:text-white focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center w-6/12",{"bg-blue-700":!l.loginOrRegister,"text-white":!l.loginOrRegister}])}," ลงทะเบียน ",2)]),(0,o._)("div",br,[(0,o.Wm)(d,{loginOrRegister:l.loginOrRegister,onL_valid:t[2]||(t[2]=e=>this.l_valid=e),onR_valid:t[3]||(t[3]=e=>this.r_valid=e),onRegistration:t[4]||(t[4]=e=>this.registrationData=e),onLogin:t[5]||(t[5]=e=>this.loginData=e)},null,8,["loginOrRegister"])]),(0,o._)("div",wr,[(0,o.wy)((0,o._)("button",{disabled:!l.l_valid,"data-modal-hide":"defaultModal",type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 disabled:opacity-60",onClick:t[6]||(t[6]=(0,s.iM)(((...e)=>i.authenticateUser&&i.authenticateUser(...e)),["prevent"]))}," เข้าสู่ระบบ ",8,xr),[[s.F8,l.loginOrRegister]]),(0,o.wy)((0,o._)("button",{disabled:!l.r_valid,"data-modal-hide":"defaultModal",type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 disabled:opacity-60",onClick:t[7]||(t[7]=(...e)=>i.register&&i.register(...e))}," ลงทะเบียน ",8,yr),[[s.F8,!l.loginOrRegister]]),_r])])])])])}const kr={key:0},$r={key:1},Dr={key:2},Sr={class:"mb-6"},Mr=(0,o._)("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"อีเมลของคุณ",-1),Ir={class:"mb-6"},Cr=(0,o._)("label",{for:"password",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"รหัสผ่านของคุณ",-1),Ur={key:3},Or={class:"relative z-0 w-full mb-6 group"},zr=(0,o._)("label",{for:"floating_email",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-0 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"ที่อยู่อีเมล",-1),qr={class:"relative z-0 w-full mb-6 group"},Lr=(0,o._)("label",{for:"floating_password",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-0 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"รหัสผ่าน ",-1),Ar={class:"relative z-0 w-full mb-6 group"},jr=(0,o._)("label",{for:"floating_repeat_password",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"ยืนยันรหัสผ่าน",-1),Tr={class:"grid md:grid-cols-2 md:gap-6"},Nr={class:"relative z-0 w-full mb-6 group"},Er=(0,o._)("label",{for:"floating_first_name",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"ชื่อ",-1),Pr={class:"relative z-0 w-full mb-6 group"},Br=(0,o._)("label",{for:"floating_last_name",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"นามสกุล",-1),Rr={class:"grid md:grid-cols-2 md:gap-6"},Hr={class:"relative z-0 w-full mb-6 group"},Fr=(0,o._)("label",{for:"floating_phone",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"หมายเลขโทรศัพท์ (123-456-7890)",-1),Zr={class:"relative z-0 w-full mb-6 group"},Kr=(0,o._)("label",{for:"floating_address",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"ที่อยู่",-1);function Vr(e,t,r,a,l,i){return(0,o.wg)(),(0,o.iD)("div",null,[i.isLoginValid?((0,o.wg)(),(0,o.iD)("p",kr)):(0,o.kq)("",!0),i.isRegistrationValid?((0,o.wg)(),(0,o.iD)("p",$r)):(0,o.kq)("",!0),r.loginOrRegister?((0,o.wg)(),(0,o.iD)("form",Dr,[(0,o._)("div",Sr,[Mr,(0,o.wy)((0,o._)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>l.l_email=e),id:"email",onBlur:t[1]||(t[1]=(...e)=>a.v$.l_email.$touch&&a.v$.l_email.$touch(...e)),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"name@gmail.com"},null,544),[[s.nr,l.l_email]]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.v$.l_email.$errors,(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mt-2 text-sm text-red-600 dark:text-red-500",key:e.$uid},[(0,o._)("strong",null,(0,n.zw)(e.$message),1)])))),128))]),(0,o._)("div",Ir,[Cr,(0,o.wy)((0,o._)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>l.l_password=e),id:"password",onBlur:t[3]||(t[3]=(...e)=>a.v$.l_password.$touch&&a.v$.l_password.$touch(...e)),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,544),[[s.nr,l.l_password]]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.v$.l_password.$errors,(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mt-2 text-sm text-red-600 dark:text-red-500",key:e.$uid},[(0,o._)("strong",null,(0,n.zw)(e.$message),1)])))),128))])])):(0,o.kq)("",!0),r.loginOrRegister?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("form",Ur,[(0,o._)("div",Or,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.r_email=e),onBlur:t[5]||(t[5]=(...e)=>a.v$.r_email.$touch&&a.v$.r_email.$touch(...e)),type:"email",name:"floating_email",id:"floating_email",class:"block my-10 py-2.5 px-3 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:"Email",required:""},null,544),[[s.nr,l.r_email]]),zr,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.v$.r_email.$errors,(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mt-2 text-sm text-red-600 dark:text-red-500",key:e.$uid},[(0,o._)("strong",null,(0,n.zw)(e.$message),1)])))),128))]),(0,o._)("div",qr,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.r_password=e),onBlur:t[7]||(t[7]=(...e)=>a.v$.r_password.$touch&&a.v$.r_password.$touch(...e)),type:"password",name:"floating_password",id:"floating_password",class:"block my-10 py-2.5 px-3 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",required:""},null,544),[[s.nr,l.r_password]]),Lr,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.v$.r_password.$errors,(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mt-2 text-sm text-red-600 dark:text-red-500",key:e.$uid},[(0,o._)("strong",null,(0,n.zw)(e.$message),1)])))),128))]),(0,o._)("div",Ar,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.r_confirm=e),onBlur:t[9]||(t[9]=(...e)=>a.v$.r_confirm.$touch&&a.v$.r_confirm.$touch(...e)),type:"password",name:"repeat_password",id:"floating_repeat_password",class:"block py-2.5 px-2 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",required:""},null,544),[[s.nr,l.r_confirm]]),jr,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.v$.r_confirm.$errors,(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mt-2 text-sm text-red-600 dark:text-red-500",key:e.$uid},[(0,o._)("strong",null,(0,n.zw)(e.$message),1)])))),128))]),(0,o._)("div",Tr,[(0,o._)("div",Nr,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.r_firstName=e),onBlur:t[11]||(t[11]=(...e)=>a.v$.r_firstName.$touch&&a.v$.r_firstName.$touch(...e)),type:"text",name:"floating_first_name",id:"floating_first_name",class:"mt-2 block py-2.5 px-2 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" "},null,544),[[s.nr,l.r_firstName]]),Er,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.v$.r_firstName.$errors,(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mt-2 text-sm text-red-600 dark:text-red-500",key:e.$uid},[(0,o._)("strong",null,(0,n.zw)(e.$message),1)])))),128))]),(0,o._)("div",Pr,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.r_lastName=e),onBlur:t[13]||(t[13]=(...e)=>a.v$.r_lastName.$touch&&a.v$.r_lastName.$touch(...e)),type:"text",name:"floating_last_name",id:"floating_last_name",class:"mt-2 block py-2.5 px-2 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" "},null,544),[[s.nr,l.r_lastName]]),Br,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.v$.r_lastName.$errors,(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mt-2 text-sm text-red-600 dark:text-red-500",key:e.$uid},[(0,o._)("strong",null,(0,n.zw)(e.$message),1)])))),128))])]),(0,o._)("div",Rr,[(0,o._)("div",Hr,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.r_phone=e),onBlur:t[15]||(t[15]=(...e)=>a.v$.r_phone.$touch&&a.v$.r_phone.$touch(...e)),type:"tel",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",name:"floating_phone",id:"floating_phone",class:"mt-2 block py-2.5 px-2 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" "},null,544),[[s.nr,l.r_phone]]),Fr,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.v$.r_phone.$errors,(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mt-2 text-sm text-red-600 dark:text-red-500",key:e.$uid},[(0,o._)("strong",null,(0,n.zw)(e.$message),1)])))),128))]),(0,o._)("div",Zr,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>l.r_address=e),onBlur:t[17]||(t[17]=(...e)=>a.v$.r_address.$touch&&a.v$.r_address.$touch(...e)),type:"text",name:"floating_address",id:"floating_address",class:"mt-2 block py-2.5 px-2 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" "},null,544),[[s.nr,l.r_address]]),Kr,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.v$.r_address.$errors,(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mt-2 text-sm text-red-600 dark:text-red-500",key:e.$uid},[(0,o._)("strong",null,(0,n.zw)(e.$message),1)])))),128))])])]))])}var Wr={props:["loginOrRegister"],setup(){return{v$:(0,Be.Xw)()}},data(){return{l_email:"",l_password:"",r_email:"",r_password:"",r_confirm:"",r_firstName:"",r_lastName:"",r_phone:"",r_address:""}},validations(){return{l_email:{requiredIf:Re.BM.withMessage("Email is required",(e=>e.length>0)),email:Re.Do},l_password:{requiredIf:Re.BM.withMessage("Password is required",(e=>e.length>0)),minLength:(0,Re.Ei)(6),maxLength:(0,Re.BS)(20)},r_firstName:{requiredIf:Re.BM.withMessage("First name is required",(e=>e.length>0)),alpha:Re.Fq,minLength:(0,Re.Ei)(3)},r_lastName:{requiredIf:Re.BM.withMessage("Last name is required",(e=>e.length>0)),alpha:Re.Fq,minLength:(0,Re.Ei)(3)},r_email:{requiredIf:Re.BM.withMessage("Email is required",(e=>e.length>0)),email:Re.Do},r_password:{requiredIf:Re.BM.withMessage("Password is required",(e=>e.length>0)),minLength:(0,Re.Ei)(6),maxLength:(0,Re.BS)(20)},r_confirm:{sameAsPassword:(0,Re.sH)(this.r_password)},r_phone:{requiredIf:Re.BM.withMessage("Phone is required",(e=>e.length>0)),numeric:Re.uR,minLength:(0,Re.Ei)(8),maxLength:(0,Re.BS)(12)},r_address:{requiredIf:Re.BM.withMessage("Address is required",(e=>e.length>0)),minLength:(0,Re.Ei)(10)}}},computed:{isLoginValid(){if(this.v$.l_email.$invalid||this.v$.l_password.$invalid)this.$emit("l_valid",!1);else{this.$emit("l_valid",!0);const e={email:this.l_email,password:this.l_password};this.$emit("login",e)}return!this.v$.l_email.$invalid&&!this.v$.l_password.$invalid},isRegistrationValid(){if(this.v$.r_email.$invalid||this.v$.r_password.$invalid||this.v$.r_confirm.$invalid||this.v$.r_firstName.$invalid||this.v$.r_lastName.$invalid||this.v$.r_phone.$invalid||this.v$.r_address.$invalid)this.$emit("r_valid",!1);else{this.$emit("r_valid",!0);const e={email:this.r_email,password:this.r_password,confirm:this.r_confirm,firstName:this.r_firstName,lastName:this.r_lastName,phone:this.r_phone,address:this.r_address};this.$emit("registration",e)}return!this.v$.r_email.$invalid&&!this.v$.r_password.$invalid&&!this.v$.r_confirm.$invalid&&!this.v$.r_firstName.$invalid&&!this.v$.r_lastName.$invalid&&!this.v$.r_phone.$invalid&&!this.v$.r_address.$invalid}},watch:{},methods:{},created(){this.l_email="",this.l_password="",this.r_email="",this.r_password=""}};const Yr=(0,L.Z)(Wr,[["render",Vr]]);var Gr=Yr,Jr={data(){return{loginOrRegister:!0,l_valid:!1,r_valid:!1,registrationData:{},loginData:{},userName:""}},computed:{...(0,D.rn)(M,["userLoggedIn","userEmail"])},watch:{userEmail(e){this.userName=e?e.match(/^([^@]*)@/)[1]:""}},components:{AuthForms:Gr},methods:{...(0,D.nv)(M,["loginUser","authenticate"]),signInOrRegister(e){this.loginOrRegister="signin"==e},async authenticateUser(){await this.authenticate(this.loginData.email,this.loginData.password)},async register(){const e=(0,b.v0)(),t=(0,x.ad)(_);(0,b.Xb)(e,this.registrationData.email,this.registrationData.password).then((e=>{const r=e.user;this.loginUser(this.registrationData.email),(0,x.ET)((0,x.hJ)(t,"users"),{first:this.registrationData.firstName,last:this.registrationData.lastName,phone:this.registrationData.phone,address:this.registrationData.address,email:this.registrationData.email,uid:r.uid}).then((()=>{})).catch((e=>{console.log("error",e)}))})).catch((()=>{}))}}};const Xr=(0,L.Z)(Jr,[["render",vr]]);var Qr=Xr;const es=(0,b.v0)();var ts={components:{AuthModal:Qr},computed:{...(0,D.rn)(M,["userLoggedIn"])},methods:{...(0,D.nv)(M,["logOutUser"]),async signUserOut(){await(0,b.w7)(es).then((()=>{this.logOutUser(),"/manage"===this.$route.path&&this.$router.push("/")})).catch((()=>{}))}}};const rs=(0,L.Z)(ts,[["render",cr]]);var ss=rs;const as=(0,b.v0)();var os={name:"App",data(){return{}},components:{Navbar:ss},computed:{...(0,D.rn)(M,["userLoggedIn"])},methods:{...(0,D.nv)(M,["loginUser","authenticate"])},async created(){setTimeout((()=>{as.currentUser&&this.loginUser(as.currentUser.email)}),1e3)}};const ns=(0,L.Z)(os,[["render",er]]);var ls=ns;const is=(0,D.WB)(),ds=(0,s.ri)(ls);ds.use(is),ds.use(Xt),ds.mount("#app")},5336:function(e,t,r){var s={"./1.webp":3130,"./2.webp":7110,"./3.webp":6183,"./4.webp":3489,"./5.webp":4394,"./6.webp":7065};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=o,e.exports=a,a.id=5336},3130:function(e,t,r){"use strict";e.exports=r.p+"img/1.8a8621e7.webp"},7110:function(e,t,r){"use strict";e.exports=r.p+"img/2.f8962ce9.webp"},6183:function(e,t,r){"use strict";e.exports=r.p+"img/3.679bfbee.webp"},3489:function(e,t,r){"use strict";e.exports=r.p+"img/4.f7f895c8.webp"},4394:function(e,t,r){"use strict";e.exports=r.p+"img/5.5838e94d.webp"},7065:function(e,t,r){"use strict";e.exports=r.p+"img/6.bf751295.webp"}},t={};function r(s){var a=t[s];if(void 0!==a)return a.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,r),o.exports}r.m=e,function(){var e=[];r.O=function(t,s,a,o){if(!s){var n=1/0;for(u=0;u<e.length;u++){s=e[u][0],a=e[u][1],o=e[u][2];for(var l=!0,i=0;i<s.length;i++)(!1&o||n>=o)&&Object.keys(r.O).every((function(e){return r.O[e](s[i])}))?s.splice(i--,1):(l=!1,o<n&&(n=o));if(l){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[s,a,o]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p="/"}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,o,n=s[0],l=s[1],i=s[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(a in l)r.o(l,a)&&(r.m[a]=l[a]);if(i)var u=i(r)}for(t&&t(s);d<n.length;d++)o=n[d],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},s=self["webpackChunkmusic_app"]=self["webpackChunkmusic_app"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=r.O(void 0,[998],(function(){return r(5766)}));s=r.O(s)})();
//# sourceMappingURL=app.3d7ad54d.js.map